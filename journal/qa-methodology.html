<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The QA Methodology That Changed Everything | Keith Binkly</title>
  <meta name="description" content="How row-level sample tracing transformed my debugging process from hours to minutes.">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-base: #0d0d0d;
      --bg-surface: #111;
      --bg-card: #161616;
      --border-dim: #222;
      --border-mid: #333;
      --text-dim: #6b6b6b;
      --text-mid: #a0a0a0;
      --text-bright: #d4d4d4;
      --text-white: #f5f5f5;
      --accent: #d4a84b;
      --link: #7db4c9;
      --success: #5a9a68;
      --error: #c75a5a;
      --space-xs: 0.5rem;
      --space-sm: 1rem;
      --space-md: 1.5rem;
      --space-lg: 3rem;
      --space-xl: 4.5rem;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { font-size: 18px; }
    body {
      min-height: 100vh;
      font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-base);
      color: var(--text-bright);
      line-height: 1.7;
      -webkit-font-smoothing: antialiased;
    }

    .container {
      max-width: 680px;
      margin: 0 auto;
      padding: var(--space-xl) var(--space-md);
    }

    a { color: var(--link); text-decoration: none; }
    a:hover { color: var(--text-white); }

    .back-link {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--text-dim);
      display: inline-block;
      margin-bottom: var(--space-lg);
    }

    .back-link:hover { color: var(--link); }

    .article-meta {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--text-dim);
      margin-bottom: var(--space-sm);
    }

    h1 {
      font-size: 1.75rem;
      font-weight: 600;
      color: var(--text-white);
      margin-bottom: var(--space-lg);
      line-height: 1.3;
    }

    .article-content p {
      margin-bottom: var(--space-md);
      font-size: 1rem;
      line-height: 1.8;
    }

    .article-content strong {
      color: var(--text-white);
      font-weight: 500;
    }

    .divider {
      width: 40px;
      height: 1px;
      background: var(--border-mid);
      margin: var(--space-lg) 0;
    }

    .article-content ol {
      margin-bottom: var(--space-md);
      padding-left: var(--space-md);
    }

    .article-content ul {
      margin-bottom: var(--space-md);
      padding-left: var(--space-md);
    }

    .article-content li {
      margin-bottom: var(--space-xs);
      color: var(--text-mid);
    }

    .code-block {
      background: var(--bg-surface);
      border: 1px solid var(--border-dim);
      border-radius: 6px;
      padding: var(--space-md);
      margin: var(--space-md) 0 var(--space-lg);
      overflow-x: auto;
    }

    .code-block pre {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      line-height: 1.6;
      color: var(--text-mid);
      margin: 0;
    }

    .code-block .comment {
      color: var(--text-dim);
    }

    .code-block .result {
      color: var(--text-dim);
      font-style: italic;
    }

    .code-block .success {
      color: var(--success);
    }

    .code-block .problem {
      color: var(--error);
    }

    .results-table {
      width: 100%;
      border-collapse: collapse;
      margin: var(--space-md) 0 var(--space-lg);
      font-size: 0.9rem;
    }

    .results-table th,
    .results-table td {
      text-align: left;
      padding: var(--space-sm);
      border-bottom: 1px solid var(--border-dim);
    }

    .results-table th {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .results-table td {
      color: var(--text-bright);
    }

    .results-table tr:last-child td {
      border-bottom: none;
    }

    .next-section {
      margin-top: var(--space-xl);
      padding-top: var(--space-lg);
      border-top: 1px solid var(--border-dim);
    }

    .next-section h3 {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: var(--space-sm);
    }

    .next-section ul {
      list-style: none;
      padding: 0;
    }

    .next-section li {
      margin-bottom: var(--space-xs);
    }

    .next-section a {
      font-size: 0.95rem;
    }

    .takeaway {
      background: var(--bg-surface);
      border-left: 3px solid var(--accent);
      padding: var(--space-md);
      margin: var(--space-lg) 0;
    }

    .takeaway p {
      margin-bottom: 0;
      color: var(--text-mid);
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="../index.html" class="back-link">← back</a>

    <article>
      <div class="article-meta">January 2026</div>
      <h1>The QA Methodology That Changed Everything</h1>

      <div class="article-content">
        <p>The hardest part of migrating legacy SQL to dbt isn't writing the new code. It's proving the new code produces identical results.</p>

        <p>For months, my QA process looked like this:</p>

        <ol>
          <li>Run legacy query, get row count</li>
          <li>Run new dbt model, get row count</li>
          <li>Counts don't match</li>
          <li>Stare at both queries trying to figure out why</li>
          <li>Make a change, rebuild, recount</li>
          <li>Repeat 5-10 times until it works (or I give up and start over)</li>
        </ol>

        <p>Average time to find root cause: 60-90 minutes. Often longer.</p>

        <div class="divider"></div>

        <p><strong>The breakthrough: Row-level sample tracing</strong></p>

        <p>Instead of comparing aggregates, I started tracing individual records through every transformation stage.</p>

        <p>Here's the process:</p>

        <p><strong>1. Find a problem record</strong>: Pick ONE row that appears in legacy but not in dbt (or vice versa)</p>

        <p><strong>2. Trace it through every CTE</strong>:</p>

        <div class="code-block">
<pre><span class="comment">-- Stage 1: Source</span>
SELECT * FROM source WHERE id = '12345'
<span class="result">-- Result: 1 row</span> <span class="success">✓</span>

<span class="comment">-- Stage 2: After first join</span>
SELECT * FROM stage_2 WHERE id = '12345'
<span class="result">-- Result: 1 row</span> <span class="success">✓</span>

<span class="comment">-- Stage 3: After second join</span>
SELECT * FROM stage_3 WHERE id = '12345'
<span class="result">-- Result: 2 rows</span> <span class="problem">← PROBLEM</span>

<span class="comment">-- The join in stage 3 is creating duplicates</span></pre>
        </div>

        <p><strong>3. Fix the specific stage</strong>: Now I know exactly where the problem is</p>

        <p><strong>4. Document the join behavior</strong>: Add a comment or README explaining why this join fans out and how we handle it</p>

        <div class="divider"></div>

        <p><strong>The results</strong></p>

        <table class="results-table">
          <tr>
            <th>Metric</th>
            <th>Before</th>
            <th>After</th>
          </tr>
          <tr>
            <td>Time to root cause</td>
            <td>60-90 min</td>
            <td>~10 min</td>
          </tr>
          <tr>
            <td>Wrong hypotheses tested</td>
            <td>3-5</td>
            <td>0</td>
          </tr>
          <tr>
            <td>Knowledge retained</td>
            <td>Session only</td>
            <td>Permanent (in code)</td>
          </tr>
        </table>

        <p>The 10-minute number isn't because I got faster at debugging. It's because I stopped guessing.</p>

        <div class="divider"></div>

        <p><strong>Why this works</strong></p>

        <p>Aggregate comparisons tell you <em>that</em> something is wrong. Row-level tracing tells you <em>where</em> and <em>why</em>.</p>

        <p>When you watch a single record flow through transformations, grain violations become obvious. You see the exact moment 1 row becomes 2 rows. You see which join caused it. You see what's different about this record that made it fan out.</p>

        <div class="divider"></div>

        <p><strong>How this became a skill</strong></p>

        <p>I documented the methodology and added it to dbt-agent's QA skill. Now when an agent encounters a uniqueness violation or row count mismatch, it doesn't guess. It:</p>

        <ol>
          <li>Identifies a sample record showing the issue</li>
          <li>Generates trace queries for each CTE</li>
          <li>Runs them sequentially</li>
          <li>Reports exactly where the grain changed</li>
          <li>Suggests fixes based on the join pattern</li>
        </ol>

        <p>What used to take me 90 minutes now takes the agent about 10—and it documents its findings in the model's README.</p>

        <div class="divider"></div>

        <p><strong>The lesson</strong></p>

        <p>The biggest gains in AI-assisted development don't come from better models. They come from encoding expert methodology into retrievable knowledge.</p>

        <p>The row-level trace technique isn't complicated. Any senior analyst knows some version of it. But it's the kind of tacit knowledge that lives in people's heads—learned through painful experience, rarely documented, lost when people leave.</p>

        <p>dbt-agent makes that knowledge explicit, persistent, and reusable.</p>

        <div class="divider"></div>

        <p><strong>Try it yourself</strong></p>

        <div class="takeaway">
          <p>Next time you have a row count mismatch: don't look at aggregates. Pick one problem record. Trace it through every stage. Watch where the count changes. You'll find the bug in minutes, not hours.</p>
        </div>

        <div class="next-section">
          <h3>In this series</h3>
          <ul>
            <li><a href="why-i-built-dbt-agent.html">← Why I Built dbt-agent</a></li>
            <li><a href="how-dbt-agent-thinks.html">← How dbt-agent Thinks</a></li>
          </ul>
        </div>
      </div>
    </article>
  </div>
</body>
</html>
